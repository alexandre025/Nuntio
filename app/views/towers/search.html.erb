<%- content_for :header_nav_bar do -%>
  <%= render partial: 'shared/header_nav_bar', locals: { current: :towers } %>
<%- end -%>

<%- content_for :header_sub_nav_bar do -%>
  <%= render partial: 'shared/header_sub_nav_bar', locals: { current_sub: :towers_search, category: nil } %>
<%- end -%>

<!--
Themes : <br>
<#% @themes.each do |theme| %>
  <%#= link_to theme.name, theme_towers_path(theme)%>
<#% end %>

<br>

<h1>Current theme : <#%= @theme.name %></h1>

Categories : <br>
<#% @theme.categories.each do |category| %>
  <%#= link_to category.name, category_towers_path(@theme, category)%>
<#% end %>

<br>

Towers : <br>
<#%- @towers.each do |tower| -%>
  <%#= render partial: 'towers/tower', locals: { tower: tower } %>
<#%- end -%>

<#%= paginate @towers %>
-->

<div class="tower-container">

  <div class="tower-list-full">

    <div class="tower-list-full__header">
      <div class="tower-list-full__header--left">
        <h2 class="list-title">Toutes les offres <%= "correspondant à la recherche: #{params[:q][:title_or_short_excerpt_or_guard_fullname_cont]}" unless params[:q][:title_or_short_excerpt_or_guard_fullname_cont].blank? %></h2>
      </div>
    </div>

    <div class="tower-list-full__filters list-filters">
      <form action="">
        <div class="list-filters__left">
          <select name="" id="">
            <option value="" disabled selected>Fourchette de prix</option>
            <option value="">Lorem</option>
            <option value="">Ipsum</option>
          </select>
          <select name="" id="">
            <option value="" disabled selected>Niveau</option>
            <option value="">Lorem</option>
            <option value="">Ipsum</option>
          </select>
          <select name="" id="">
            <option value="" disabled selected>Fréquence</option>
            <option value="">Lorem</option>
            <option value="">Ipsum</option>
          </select>
        </div>
        <div class="list-filters__right">
          <p>Trier par :</p>
          <select name="" id="">
            <option value="" disabled selected>Popularité</option>
            <option value="">Lorem</option>
            <option value="">Ipsum</option>
          </select>
        </div>
      </form>
      <%= search_form_for @q, url: search_towers_path, method: :post do |f| %>
        <div class="list-filters__left">
          <%= f.input :title_or_short_excerpt_or_guard_fullname_cont, as: :hidden %>
          <%= f.select :grade_eq, Tower::GRADES.map { |g| [t("towers.grade.#{g}"), g] }, { include_blank: 'Niveau' }, {onchange: 'this.form.submit();'} %>
        </div>
        <div class="list-filters__right">
          <p>Trier par :</p>
        </div>
      <% end %>
    </div>

    <div class="tower-list-full__cards">
      <% if @towers.count > 0 %>
        <%- @towers.each do |tower| -%>
          <%= render partial: 'towers/tower_card', locals: { tower: tower } %>
        <%- end -%>
      <% else %>
        <p class="no-results">Aucun résultat</p>
      <% end %>
    </div>
  </div>

</div>
